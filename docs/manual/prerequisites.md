# 事前手順
LLM-Code-ReviewerをAWSにデプロイ・運用するための事前手順について記載する。  
基本的には1度だけ実施すればよい。

## ドメイン設定

### 全体の流れ
*   Amazon Route 53 の設定: AWSでドメイン情報を管理するための「ホストゾーン」を作成します。
*   お名前.com の設定: ドメインのDNSサーバーを、お名前.comのものからRoute 53へ変更します。
*   Amazon SES の設定: メール配信のために、ドメインの所有権を認証します。

お名前.comを使用していますが、他のドメイン登録サービスでも可能です。

参考：[お名前.comで取得したドメインをRoute53のネームサーバで管理設定してみた](https://dev.classmethod.jp/articles/route53-domain-onamae/)

### Amazon Route 53 の設定
Route 53に「ホストゾーン」を作成します。

1. AWSマネジメントコンソールにログインし、サービス検索で「Route 53」と入力してダッシュボードに移動します。
2. 左側のメニューから「ホストゾーン」を選択します。
3. 「ホストゾーンの作成」をクリックします。
4. ドメイン名: お名前.comで取得した独自ドメイン名（例: example.com）を入力します。
5. タイプ: 「パブリックホストゾーン」を選択します。
6. 「ホストゾーンの作成」をクリックします。

作成が完了すると、NSというタイプのレコードが自動で作成されます。値の欄に4つのネームサーバーのアドレス（例: ns-xxx.awsdns-xx.com.）が表示されます。この4つのアドレスをメモ帳などにコピーしておきます。

### お名前.com の設定
お名前.comで管理しているドメインが、先ほど作成したAWSのネームサーバーを参照するように設定を変更します。

1. 「お名前.com」にログインします。
2. 上部メニューの「ネームサーバー設定」から「ネームサーバーの変更」を選択します。
3. 設定を変更したいドメインにチェックを入れます。
4. 「他のネームサーバーを利用」タブを選択します。
5. 「ネームサーバー情報を入力」の欄に、ステップ1でコピーした4つのAWSのネームサーバーアドレスを1行ずつ入力します。（注意：末尾のドット . は削除して入力してください）
6. 入力内容を確認し、設定を完了します。

## SES設定

### Amazon SES でメール配信を設定する
ネームサーバーの変更が反映されたら、SESでメールを配信するための設定を行います。

1. AWSマネジメントコンソールで「Simple Email Service (SES)」に移動します。
2. 左側のメニューの「設定」にある「ID」を選択します。
3. 「IDの作成 」をクリックします。
4. IDタイプ: 「ドメイン」を選択します。
5. ドメイン名を入力します。
6. 「IDの作成」をクリックします。

自動でRoute 53にCNAMEレコードが3つ追加されます。  
しばらく待つと、SESの画面でIDのステータスが「検証済み (Verified)」に変わります。


